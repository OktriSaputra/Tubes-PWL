{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\Windows Pro\\\\Desktop\\\\shop\\\\react-shop\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"C:\\\\Users\\\\Windows Pro\\\\Desktop\\\\shop\\\\react-shop\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Windows Pro\\\\Desktop\\\\shop\\\\react-shop\\\\client\\\\src\\\\components\\\\views\\\\LandingPage\\\\LandingPage.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState } from 'react';\nimport Axios from 'axios';\nimport { Icon, Col, Card, Row } from 'antd';\nimport ImageSlider from '../../utils/ImageSlider';\nimport CheckBox from './Sections/CheckBox';\nimport RadioBox from './Sections/RadioBox';\nimport { continents, price } from './Sections/Datas';\nimport SearchFeature from './Sections/SearchFeature';\nconst Meta = Card.Meta;\n\nfunction LandingPage() {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        Products = _useState2[0],\n        setProducts = _useState2[1];\n\n  const _useState3 = useState(0),\n        _useState4 = _slicedToArray(_useState3, 2),\n        Skip = _useState4[0],\n        setSkip = _useState4[1];\n\n  const _useState5 = useState(8),\n        _useState6 = _slicedToArray(_useState5, 2),\n        Limit = _useState6[0],\n        setLimit = _useState6[1];\n\n  const _useState7 = useState(),\n        _useState8 = _slicedToArray(_useState7, 2),\n        PostSize = _useState8[0],\n        setPostSize = _useState8[1];\n\n  const _useState9 = useState(\"\"),\n        _useState10 = _slicedToArray(_useState9, 2),\n        SearchTerms = _useState10[0],\n        setSearchTerms = _useState10[1];\n\n  const _useState11 = useState({\n    continents: [],\n    price: []\n  }),\n        _useState12 = _slicedToArray(_useState11, 2),\n        Filters = _useState12[0],\n        setFilters = _useState12[1];\n\n  useEffect(() => {\n    const variables = {\n      skip: Skip,\n      limit: Limit\n    };\n    getProducts(variables);\n  }, []);\n\n  const getProducts = variables => {\n    Axios.post('/api/product/getProducts', variables).then(response => {\n      if (response.data.success) {\n        if (variables.loadMore) {\n          setProducts([...Products, ...response.data.products]);\n        } else {\n          setProducts(response.data.products);\n        }\n\n        setPostSize(response.data.postSize);\n      } else {\n        alert('Failed to fectch product datas');\n      }\n    });\n  };\n\n  const onLoadMore = () => {\n    let skip = Skip + Limit;\n    const variables = {\n      skip: skip,\n      limit: Limit,\n      loadMore: true,\n      filters: Filters,\n      searchTerm: SearchTerms\n    };\n    getProducts(variables);\n    setSkip(skip);\n  };\n\n  const renderCards = Products.map((product, index) => {\n    return React.createElement(Col, {\n      lg: 6,\n      md: 8,\n      xs: 24,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(Card, {\n      hoverable: true,\n      cover: React.createElement(\"a\", {\n        href: \"/product/\".concat(product._id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, \" \", React.createElement(ImageSlider, {\n        images: product.images,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(Meta, {\n      title: product.title,\n      description: \"$\".concat(product.price),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    })));\n  });\n\n  const showFilteredResults = filters => {\n    const variables = {\n      skip: 0,\n      limit: Limit,\n      filters: filters\n    };\n    getProducts(variables);\n    setSkip(0);\n  };\n\n  const handlePrice = value => {\n    const data = price;\n    let array = [];\n\n    for (let key in data) {\n      if (data[key]._id === parseInt(value, 10)) {\n        array = data[key].array;\n      }\n    }\n\n    console.log('array', array);\n    return array;\n  };\n\n  const handleFilters = (filters, category) => {\n    const newFilters = _objectSpread({}, Filters);\n\n    newFilters[category] = filters;\n\n    if (category === \"price\") {\n      let priceValues = handlePrice(filters);\n      newFilters[category] = priceValues;\n    }\n\n    console.log(newFilters);\n    showFilteredResults(newFilters);\n    setFilters(newFilters);\n  };\n\n  const updateSearchTerms = newSearchTerm => {\n    const variables = {\n      skip: 0,\n      limit: Limit,\n      filters: Filters,\n      searchTerm: newSearchTerm\n    };\n    setSkip(0);\n    setSearchTerms(newSearchTerm);\n    getProducts(variables);\n  };\n\n  return React.createElement(\"div\", {\n    style: {\n      width: '75%',\n      margin: '3rem auto'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    style: {\n      textAlign: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  }, \"  Happy Shopping  \", React.createElement(Icon, {\n    type: \"cake\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  }), \"  \")), React.createElement(Row, {\n    gutter: [16, 16],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153\n    },\n    __self: this\n  }, React.createElement(Col, {\n    lg: 12,\n    xs: 24,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154\n    },\n    __self: this\n  }, React.createElement(CheckBox, {\n    list: continents,\n    handleFilters: filters => handleFilters(filters, \"continents\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155\n    },\n    __self: this\n  })), React.createElement(Col, {\n    lg: 12,\n    xs: 24,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160\n    },\n    __self: this\n  }, React.createElement(RadioBox, {\n    list: price,\n    handleFilters: filters => handleFilters(filters, \"price\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      justifyContent: 'flex-end',\n      margin: '1rem auto'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170\n    },\n    __self: this\n  }, React.createElement(SearchFeature, {\n    refreshFunction: updateSearchTerms,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  })), Products.length === 0 ? React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      height: '300px',\n      justifyContent: 'center',\n      alignItems: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181\n    },\n    __self: this\n  }, \"No post yet...\")) : React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183\n    },\n    __self: this\n  }, React.createElement(Row, {\n    gutter: [16, 16],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184\n    },\n    __self: this\n  }, renderCards)), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193\n    },\n    __self: this\n  }), PostSize >= Limit && React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      justifyContent: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    onClick: onLoadMore,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197\n    },\n    __self: this\n  }, \"Load More\")));\n}\n\nexport default LandingPage;","map":{"version":3,"sources":["C:\\Users\\Windows Pro\\Desktop\\shop\\react-shop\\client\\src\\components\\views\\LandingPage\\LandingPage.js"],"names":["React","useEffect","useState","Axios","Icon","Col","Card","Row","ImageSlider","CheckBox","RadioBox","continents","price","SearchFeature","Meta","LandingPage","Products","setProducts","Skip","setSkip","Limit","setLimit","PostSize","setPostSize","SearchTerms","setSearchTerms","Filters","setFilters","variables","skip","limit","getProducts","post","then","response","data","success","loadMore","products","postSize","alert","onLoadMore","filters","searchTerm","renderCards","map","product","index","_id","images","title","showFilteredResults","handlePrice","value","array","key","parseInt","console","log","handleFilters","category","newFilters","priceValues","updateSearchTerms","newSearchTerm","width","margin","textAlign","display","justifyContent","length","height","alignItems"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,IAAT,EAAeC,GAAf,EAAoBC,IAApB,EAA0BC,GAA1B,QAAqC,MAArC;AACA,OAAOC,WAAP,MAAwB,yBAAxB;AACA,OAAOC,QAAP,MAAqB,qBAArB;AACA,OAAOC,QAAP,MAAqB,qBAArB;AACA,SAASC,UAAT,EAAqBC,KAArB,QAAkC,kBAAlC;AACA,OAAOC,aAAP,MAA0B,0BAA1B;MAEQC,I,GAASR,I,CAATQ,I;;AAER,SAASC,WAAT,GAAuB;AAAA,oBAEab,QAAQ,CAAC,EAAD,CAFrB;AAAA;AAAA,QAEZc,QAFY;AAAA,QAEFC,WAFE;;AAAA,qBAGKf,QAAQ,CAAC,CAAD,CAHb;AAAA;AAAA,QAGZgB,IAHY;AAAA,QAGNC,OAHM;;AAAA,qBAIOjB,QAAQ,CAAC,CAAD,CAJf;AAAA;AAAA,QAIZkB,KAJY;AAAA,QAILC,QAJK;;AAAA,qBAKanB,QAAQ,EALrB;AAAA;AAAA,QAKZoB,QALY;AAAA,QAKFC,WALE;;AAAA,qBAMmBrB,QAAQ,CAAC,EAAD,CAN3B;AAAA;AAAA,QAMZsB,WANY;AAAA,QAMCC,cAND;;AAAA,sBAQWvB,QAAQ,CAAC;AACnCS,IAAAA,UAAU,EAAE,EADuB;AAEnCC,IAAAA,KAAK,EAAE;AAF4B,GAAD,CARnB;AAAA;AAAA,QAQZc,OARY;AAAA,QAQHC,UARG;;AAanB1B,EAAAA,SAAS,CAAC,MAAM;AAEZ,UAAM2B,SAAS,GAAG;AACdC,MAAAA,IAAI,EAAEX,IADQ;AAEdY,MAAAA,KAAK,EAAEV;AAFO,KAAlB;AAKAW,IAAAA,WAAW,CAACH,SAAD,CAAX;AAEH,GATQ,EASN,EATM,CAAT;;AAWA,QAAMG,WAAW,GAAIH,SAAD,IAAe;AAC/BzB,IAAAA,KAAK,CAAC6B,IAAN,CAAW,0BAAX,EAAuCJ,SAAvC,EACKK,IADL,CACUC,QAAQ,IAAI;AACd,UAAIA,QAAQ,CAACC,IAAT,CAAcC,OAAlB,EAA2B;AACvB,YAAIR,SAAS,CAACS,QAAd,EAAwB;AACpBpB,UAAAA,WAAW,CAAC,CAAC,GAAGD,QAAJ,EAAc,GAAGkB,QAAQ,CAACC,IAAT,CAAcG,QAA/B,CAAD,CAAX;AACH,SAFD,MAEO;AACHrB,UAAAA,WAAW,CAACiB,QAAQ,CAACC,IAAT,CAAcG,QAAf,CAAX;AACH;;AACDf,QAAAA,WAAW,CAACW,QAAQ,CAACC,IAAT,CAAcI,QAAf,CAAX;AACH,OAPD,MAOO;AACHC,QAAAA,KAAK,CAAC,gCAAD,CAAL;AACH;AACJ,KAZL;AAaH,GAdD;;AAgBA,QAAMC,UAAU,GAAG,MAAM;AACrB,QAAIZ,IAAI,GAAGX,IAAI,GAAGE,KAAlB;AAEA,UAAMQ,SAAS,GAAG;AACdC,MAAAA,IAAI,EAAEA,IADQ;AAEdC,MAAAA,KAAK,EAAEV,KAFO;AAGdiB,MAAAA,QAAQ,EAAE,IAHI;AAIdK,MAAAA,OAAO,EAAEhB,OAJK;AAKdiB,MAAAA,UAAU,EAAEnB;AALE,KAAlB;AAOAO,IAAAA,WAAW,CAACH,SAAD,CAAX;AACAT,IAAAA,OAAO,CAACU,IAAD,CAAP;AACH,GAZD;;AAeA,QAAMe,WAAW,GAAG5B,QAAQ,CAAC6B,GAAT,CAAa,CAACC,OAAD,EAAUC,KAAV,KAAoB;AAEjD,WAAO,oBAAC,GAAD;AAAK,MAAA,EAAE,EAAE,CAAT;AAAY,MAAA,EAAE,EAAE,CAAhB;AAAmB,MAAA,EAAE,EAAE,EAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACH,oBAAC,IAAD;AACI,MAAA,SAAS,EAAE,IADf;AAEI,MAAA,KAAK,EAAE;AAAG,QAAA,IAAI,qBAAcD,OAAO,CAACE,GAAtB,CAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAsC,oBAAC,WAAD;AAAa,QAAA,MAAM,EAAEF,OAAO,CAACG,MAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAtC,CAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAII,oBAAC,IAAD;AACI,MAAA,KAAK,EAAEH,OAAO,CAACI,KADnB;AAEI,MAAA,WAAW,aAAMJ,OAAO,CAAClC,KAAd,CAFf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJJ,CADG,CAAP;AAWH,GAbmB,CAApB;;AAgBA,QAAMuC,mBAAmB,GAAIT,OAAD,IAAa;AAErC,UAAMd,SAAS,GAAG;AACdC,MAAAA,IAAI,EAAE,CADQ;AAEdC,MAAAA,KAAK,EAAEV,KAFO;AAGdsB,MAAAA,OAAO,EAAEA;AAHK,KAAlB;AAMAX,IAAAA,WAAW,CAACH,SAAD,CAAX;AACAT,IAAAA,OAAO,CAAC,CAAD,CAAP;AAEH,GAXD;;AAaA,QAAMiC,WAAW,GAAIC,KAAD,IAAW;AAC3B,UAAMlB,IAAI,GAAGvB,KAAb;AACA,QAAI0C,KAAK,GAAG,EAAZ;;AAEA,SAAK,IAAIC,GAAT,IAAgBpB,IAAhB,EAAsB;AAElB,UAAIA,IAAI,CAACoB,GAAD,CAAJ,CAAUP,GAAV,KAAkBQ,QAAQ,CAACH,KAAD,EAAQ,EAAR,CAA9B,EAA2C;AACvCC,QAAAA,KAAK,GAAGnB,IAAI,CAACoB,GAAD,CAAJ,CAAUD,KAAlB;AACH;AACJ;;AACDG,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBJ,KAArB;AACA,WAAOA,KAAP;AACH,GAZD;;AAcA,QAAMK,aAAa,GAAG,CAACjB,OAAD,EAAUkB,QAAV,KAAuB;AAEzC,UAAMC,UAAU,qBAAQnC,OAAR,CAAhB;;AAEAmC,IAAAA,UAAU,CAACD,QAAD,CAAV,GAAuBlB,OAAvB;;AAEA,QAAIkB,QAAQ,KAAK,OAAjB,EAA0B;AACtB,UAAIE,WAAW,GAAGV,WAAW,CAACV,OAAD,CAA7B;AACAmB,MAAAA,UAAU,CAACD,QAAD,CAAV,GAAuBE,WAAvB;AAEH;;AAEDL,IAAAA,OAAO,CAACC,GAAR,CAAYG,UAAZ;AAEAV,IAAAA,mBAAmB,CAACU,UAAD,CAAnB;AACAlC,IAAAA,UAAU,CAACkC,UAAD,CAAV;AACH,GAhBD;;AAkBA,QAAME,iBAAiB,GAAIC,aAAD,IAAmB;AAEzC,UAAMpC,SAAS,GAAG;AACdC,MAAAA,IAAI,EAAE,CADQ;AAEdC,MAAAA,KAAK,EAAEV,KAFO;AAGdsB,MAAAA,OAAO,EAAEhB,OAHK;AAIdiB,MAAAA,UAAU,EAAEqB;AAJE,KAAlB;AAOA7C,IAAAA,OAAO,CAAC,CAAD,CAAP;AACAM,IAAAA,cAAc,CAACuC,aAAD,CAAd;AAEAjC,IAAAA,WAAW,CAACH,SAAD,CAAX;AACH,GAbD;;AAgBA,SACI;AAAK,IAAA,KAAK,EAAE;AAAEqC,MAAAA,KAAK,EAAE,KAAT;AAAgBC,MAAAA,MAAM,EAAE;AAAxB,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,KAAK,EAAE;AAAEC,MAAAA,SAAS,EAAE;AAAb,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAsB,oBAAC,IAAD;AAAM,IAAA,IAAI,EAAC,MAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAtB,OADJ,CADJ,EAQI,oBAAC,GAAD;AAAK,IAAA,MAAM,EAAE,CAAC,EAAD,EAAK,EAAL,CAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,GAAD;AAAK,IAAA,EAAE,EAAE,EAAT;AAAa,IAAA,EAAE,EAAE,EAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,QAAD;AACI,IAAA,IAAI,EAAExD,UADV;AAEI,IAAA,aAAa,EAAE+B,OAAO,IAAIiB,aAAa,CAACjB,OAAD,EAAU,YAAV,CAF3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CADJ,EAOI,oBAAC,GAAD;AAAK,IAAA,EAAE,EAAE,EAAT;AAAa,IAAA,EAAE,EAAE,EAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,QAAD;AACI,IAAA,IAAI,EAAE9B,KADV;AAEI,IAAA,aAAa,EAAE8B,OAAO,IAAIiB,aAAa,CAACjB,OAAD,EAAU,OAAV,CAF3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAPJ,CARJ,EAyBI;AAAK,IAAA,KAAK,EAAE;AAAE0B,MAAAA,OAAO,EAAE,MAAX;AAAmBC,MAAAA,cAAc,EAAE,UAAnC;AAA+CH,MAAAA,MAAM,EAAE;AAAvD,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEI,oBAAC,aAAD;AACI,IAAA,eAAe,EAAEH,iBADrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CAzBJ,EAkCK/C,QAAQ,CAACsD,MAAT,KAAoB,CAApB,GACG;AAAK,IAAA,KAAK,EAAE;AAAEF,MAAAA,OAAO,EAAE,MAAX;AAAmBG,MAAAA,MAAM,EAAE,OAA3B;AAAoCF,MAAAA,cAAc,EAAE,QAApD;AAA8DG,MAAAA,UAAU,EAAE;AAA1E,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ,CADH,GAIG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,GAAD;AAAK,IAAA,MAAM,EAAE,CAAC,EAAD,EAAK,EAAL,CAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEK5B,WAFL,CADJ,CAtCR,EAgDI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAhDJ,EAgDU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAhDV,EAkDKtB,QAAQ,IAAIF,KAAZ,IACG;AAAK,IAAA,KAAK,EAAE;AAAEgD,MAAAA,OAAO,EAAE,MAAX;AAAmBC,MAAAA,cAAc,EAAE;AAAnC,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAQ,IAAA,OAAO,EAAE5B,UAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADJ,CAnDR,CADJ;AA4DH;;AAED,eAAe1B,WAAf","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport Axios from 'axios';\nimport { Icon, Col, Card, Row } from 'antd';\nimport ImageSlider from '../../utils/ImageSlider';\nimport CheckBox from './Sections/CheckBox';\nimport RadioBox from './Sections/RadioBox';\nimport { continents, price } from './Sections/Datas';\nimport SearchFeature from './Sections/SearchFeature';\n\nconst { Meta } = Card;\n\nfunction LandingPage() {\n\n    const [Products, setProducts] = useState([])\n    const [Skip, setSkip] = useState(0)\n    const [Limit, setLimit] = useState(8)\n    const [PostSize, setPostSize] = useState()\n    const [SearchTerms, setSearchTerms] = useState(\"\")\n\n    const [Filters, setFilters] = useState({\n        continents: [],\n        price: []\n    })\n\n    useEffect(() => {\n\n        const variables = {\n            skip: Skip,\n            limit: Limit,\n        }\n\n        getProducts(variables)\n\n    }, [])\n\n    const getProducts = (variables) => {\n        Axios.post('/api/product/getProducts', variables)\n            .then(response => {\n                if (response.data.success) {\n                    if (variables.loadMore) {\n                        setProducts([...Products, ...response.data.products])\n                    } else {\n                        setProducts(response.data.products)\n                    }\n                    setPostSize(response.data.postSize)\n                } else {\n                    alert('Failed to fectch product datas')\n                }\n            })\n    }\n\n    const onLoadMore = () => {\n        let skip = Skip + Limit;\n\n        const variables = {\n            skip: skip,\n            limit: Limit,\n            loadMore: true,\n            filters: Filters,\n            searchTerm: SearchTerms\n        }\n        getProducts(variables)\n        setSkip(skip)\n    }\n\n\n    const renderCards = Products.map((product, index) => {\n\n        return <Col lg={6} md={8} xs={24}>\n            <Card\n                hoverable={true}\n                cover={<a href={`/product/${product._id}`} > <ImageSlider images={product.images} /></a>}\n            >\n                <Meta\n                    title={product.title}\n                    description={`$${product.price}`}\n                />\n            </Card>\n        </Col>\n    })\n\n\n    const showFilteredResults = (filters) => {\n\n        const variables = {\n            skip: 0,\n            limit: Limit,\n            filters: filters\n\n        }\n        getProducts(variables)\n        setSkip(0)\n\n    }\n\n    const handlePrice = (value) => {\n        const data = price;\n        let array = [];\n\n        for (let key in data) {\n\n            if (data[key]._id === parseInt(value, 10)) {\n                array = data[key].array;\n            }\n        }\n        console.log('array', array)\n        return array\n    }\n\n    const handleFilters = (filters, category) => {\n\n        const newFilters = { ...Filters }\n\n        newFilters[category] = filters\n\n        if (category === \"price\") {\n            let priceValues = handlePrice(filters)\n            newFilters[category] = priceValues\n\n        }\n\n        console.log(newFilters)\n\n        showFilteredResults(newFilters)\n        setFilters(newFilters)\n    }\n\n    const updateSearchTerms = (newSearchTerm) => {\n\n        const variables = {\n            skip: 0,\n            limit: Limit,\n            filters: Filters,\n            searchTerm: newSearchTerm\n        }\n\n        setSkip(0)\n        setSearchTerms(newSearchTerm)\n\n        getProducts(variables)\n    }\n\n\n    return (\n        <div style={{ width: '75%', margin: '3rem auto' }}>\n            <div style={{ textAlign: 'center' }}>\n                <h2>  Happy Shopping  <Icon type=\"cake\" />  </h2>\n            </div>\n\n\n            {/* Filter  */}\n\n            <Row gutter={[16, 16]}>\n                <Col lg={12} xs={24} >\n                    <CheckBox\n                        list={continents}\n                        handleFilters={filters => handleFilters(filters, \"continents\")}\n                    />\n                </Col>\n                <Col lg={12} xs={24}>\n                    <RadioBox\n                        list={price}\n                        handleFilters={filters => handleFilters(filters, \"price\")}\n                    />\n                </Col>\n            </Row>\n\n\n            {/* Search  */}\n            <div style={{ display: 'flex', justifyContent: 'flex-end', margin: '1rem auto' }}>\n\n                <SearchFeature\n                    refreshFunction={updateSearchTerms}\n                />\n\n            </div>\n\n\n            {Products.length === 0 ?\n                <div style={{ display: 'flex', height: '300px', justifyContent: 'center', alignItems: 'center' }}>\n                    <h2>No post yet...</h2>\n                </div> :\n                <div>\n                    <Row gutter={[16, 16]}>\n\n                        {renderCards}\n\n                    </Row>\n\n\n                </div>\n            }\n            <br /><br />\n\n            {PostSize >= Limit &&\n                <div style={{ display: 'flex', justifyContent: 'center' }}>\n                    <button onClick={onLoadMore}>Load More</button>\n                </div>\n            }\n\n\n        </div>\n    )\n}\n\nexport default LandingPage\n"]},"metadata":{},"sourceType":"module"}